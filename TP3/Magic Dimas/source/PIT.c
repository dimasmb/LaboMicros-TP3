/***************************************************************************//**
  @file     +Nombre del archivo (ej: template.c)+
  @brief    +Descripcion del archivo+
  @author   +Nombre del autor (ej: Salvador Allende)+
 ******************************************************************************/

/*******************************************************************************
 * INCLUDE HEADER FILES
 ******************************************************************************/
#include "MK64F12.h"


/*******************************************************************************
 * CONSTANT AND MACRO DEFINITIONS USING #DEFINE
 ******************************************************************************/



/*******************************************************************************
 * ENUMERATIONS AND STRUCTURES AND TYPEDEFS
 ******************************************************************************/



/*******************************************************************************
 * VARIABLES WITH GLOBAL SCOPE
 ******************************************************************************/

// +ej: unsigned int anio_actual;+


/*******************************************************************************
 * FUNCTION PROTOTYPES FOR PRIVATE FUNCTIONS WITH FILE LEVEL SCOPE
 ******************************************************************************/

// +ej: static void falta_envido (int);+


/*******************************************************************************
 * ROM CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

// +ej: static const int temperaturas_medias[4] = {23, 26, 24, 29};+


/*******************************************************************************
 * STATIC VARIABLES AND CONST VARIABLES WITH FILE LEVEL SCOPE
 ******************************************************************************/

// +ej: static int temperaturas_actuales[4];+


/*******************************************************************************
 *******************************************************************************
                        GLOBAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/
void PIT_Init(uint8_t channel, uint32_t useg)
{
  SIM->SCGC6 |= SIM_SCGC6_PIT_MASK; //Clock Gating

  PIT->MCR |= PIT_MCR_MDIS_MASK;  //Habilito el modulo

  //BusClock = 50Mhz LDVAL= (useg/1000000) * 50000000
  PIT->CHANNEL[channel].LDVAL = (useg * 50);

  PIT->CHANNEL[channel].TCTRL |= (PIT_TCTRL_TIE_MASK | PIT_TCTRL_TEN_SHIFT);

  switch(channel)
  {
    case 0:
      NVIC_Enable(PIT0_IRQn);
      break;
    case 1:
      NVIC_Enable(PIT1_IRQn);
      break;
    case 2:
      NVIC_Enable(PIT2_IRQn);
      break;
    case 3:
      NVIC_Enable(PIT3_IRQn);
      break;
    default: break;
  }
}


/*******************************************************************************
 *******************************************************************************
                        LOCAL FUNCTION DEFINITIONS
 *******************************************************************************
 ******************************************************************************/



 